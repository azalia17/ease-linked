//
//  Extensions.swift
//  BSDLink
//
//  Created by Azalia Amanda on 27/03/25.
//

import Foundation
import MapKit
import SwiftUI
import CoreLocation

extension CLLocationCoordinate2D {
    static let istiqlal = CLLocationCoordinate2D(latitude: -6.170166, longitude: 106.831375)
    static let bbb = CLLocationCoordinate2D(latitude: -6.270166, longitude: 106.821375)
    static let ccc = CLLocationCoordinate2D(latitude: -6.20166, longitude: 106.825375)
        
    
    static let aeonMall1 = CLLocationCoordinate2D(latitude: -6.303088042046716, longitude: 106.64386914893227)
    static let aeonMall2 = CLLocationCoordinate2D(latitude: -6.302824708248256, longitude: 106.64435591660646)
    static let albera = CLLocationCoordinate2D(latitude: -6.2964640421100375, longitude: 106.64518498405033)
    static let allevare = CLLocationCoordinate2D(latitude: -6.296974042278538, longitude: 106.64759862824451)
    static let amarilla = CLLocationCoordinate2D(latitude: -6.31945071131266, longitude: 106.65531335405963)
    static let astra = CLLocationCoordinate2D(latitude: -6.289339814184592, longitude: 106.63942492632744)
    static let atmajaya = CLLocationCoordinate2D(latitude: -6.317463894355649, longitude: 106.65015926556696)
    static let autoparts = CLLocationCoordinate2D(latitude: -6.295412578074074, longitude: 106.67870880195183)
    static let avani = CLLocationCoordinate2D(latitude: -6.317281098947794, longitude: 106.65865118677968)
    static let bmcDigitalHub1 = CLLocationCoordinate2D(latitude: -6.307366058308988, longitude: 106.65453518783794)
    static let bca = CLLocationCoordinate2D(latitude: -6.287663947143179, longitude: 106.63947757176116)
    static let casaDeParco1 = CLLocationCoordinate2D(latitude: -6.305593360728697, longitude: 106.65314061111741)
    static let casaDeParco2 = CLLocationCoordinate2D(latitude: -6.305239377035706, longitude: 106.65365486641166)
    static let cbdBarat1 = CLLocationCoordinate2D(latitude: -6.299417382978159, longitude: 106.64181571296876)
    static let cbdBarat2 = CLLocationCoordinate2D(latitude: -6.302200040044276, longitude: 106.6428095608545)
    static let cbdSelatan1 = CLLocationCoordinate2D(latitude: -6.303290012434349, longitude: 106.64934576270757)
    static let cbdTimur1 = CLLocationCoordinate2D(latitude: -6.303328048472932, longitude: 106.65066789947724)
    static let cbdTimurGop2 = CLLocationCoordinate2D(latitude: -6.300948623266252, longitude: 106.6490304437577)
    static let cbdUtara3 = CLLocationCoordinate2D(latitude: -6.298707382699139, longitude: 106.64372518783813)
    static let chadnya = CLLocationCoordinate2D(latitude: -6.317248053641986, longitude: 106.6544900859854)
    static let collinare = CLLocationCoordinate2D(latitude: -6.290732029218569, longitude: 106.64584571296892)
    static let cosmo = CLLocationCoordinate2D(latitude: -6.311930043048006, longitude: 106.649237899477)
    static let courtsMegaStore = CLLocationCoordinate2D(latitude: -6.2862513637787165, longitude: 106.63955737434566)
    static let deBrassia = CLLocationCoordinate2D(latitude: -6.2812226912920215, longitude: 106.64017737434493)
    static let deFrangpani = CLLocationCoordinate2D(latitude: -6.285050034763116, longitude: 106.64437990913659)
    static let deHeliconia1 = CLLocationCoordinate2D(latitude: -6.283654020594434, longitude: 106.64216903572311)
    static let deHeliconia2 = CLLocationCoordinate2D(latitude: -6.283340034237365, longitude: 106.64201757805095)
    static let deMaja = CLLocationCoordinate2D(latitude: -6.280864711699004, longitude: 106.63988139455049)
    static let deNara = CLLocationCoordinate2D(latitude: -6.280864711699004, longitude: 106.63988139455049)
    static let dePark1 = CLLocationCoordinate2D(latitude: -6.286983214438856, longitude: 106.64930846118436)
    static let dePark2 = CLLocationCoordinate2D(latitude: -6.2870820283095865, longitude: 106.64941352646103)
    static let digitalHub1 = CLLocationCoordinate2D(latitude: -6.30744070554819, longitude: 106.65465320503482)
    static let digitalHub2 = CLLocationCoordinate2D(latitude: -6.309584025378229, longitude: 106.65493612037916)
    static let divenaDeshna = CLLocationCoordinate2D(latitude: -6.319106727029296, longitude: 106.65633851059177)
    static let eastBusinessDistrict = CLLocationCoordinate2D(latitude: -6.299549375171692, longitude: 106.66790288360978)
    static let edutown1 = CLLocationCoordinate2D(latitude: -6.302307589813385, longitude: 106.64210927617982)
    static let edutown2 = CLLocationCoordinate2D(latitude: -6.301166055627666, longitude: 106.64229591667412)
    static let ekaHospital1 = CLLocationCoordinate2D(latitude: -6.298867382762645, longitude: 106.67121976455888)
    static let ekaHospital2 = CLLocationCoordinate2D(latitude: -6.298867382762645, longitude: 106.67121976455888)
    static let epicon = CLLocationCoordinate2D(latitude: -6.297252922928042, longitude: 106.64050510652413)
    static let eternity = CLLocationCoordinate2D(latitude: -6.314708716426537, longitude: 106.64673571296939)
    static let extremePark = CLLocationCoordinate2D(latitude: -6.309746059334561, longitude: 106.65461174736417)
    static let fbl1 = CLLocationCoordinate2D(latitude: -6.295838045702022, longitude: 106.64090623810154)
    static let fbl2 = CLLocationCoordinate2D(latitude: -6.290947379668812, longitude: 106.64012332275736)
    static let fbl5 = CLLocationCoordinate2D(latitude: -6.2880793714049625, longitude: 106.64457478042782)
    static let fiore = CLLocationCoordinate2D(latitude: -6.2965280459556325, longitude: 106.64490332275598)
    static let flore = CLLocationCoordinate2D(latitude: -6.2965280459556325, longitude: 106.64490332275598)
    static let foglio = CLLocationCoordinate2D(latitude: -6.293658044899917, longitude: 106.64330822090263)
    static let foresta1 = CLLocationCoordinate2D(latitude: -6.296720702463259, longitude: 106.64835008598519)
    static let foresta2 = CLLocationCoordinate2D(latitude: -6.290145386631221, longitude: 106.65020935714962)
    static let fresco = CLLocationCoordinate2D(latitude: -6.290576715289678, longitude: 106.64577498413372)
    static let froogy = CLLocationCoordinate2D(latitude: -6.297252922928042, longitude: 106.64050510652413)
    static let giantBSDCity1 = CLLocationCoordinate2D(latitude: -6.299388519115008, longitude: 106.66661945096263)
    static let giardina = CLLocationCoordinate2D(latitude: -6.2914483878678205, longitude: 106.64828959444202)
    static let gop1 = CLLocationCoordinate2D(latitude: -6.301760756279661, longitude: 106.64921938271583)
    static let gramedia = CLLocationCoordinate2D(latitude: -6.291282471309002, longitude: 106.63946078437075)
    static let grandLucky1 = CLLocationCoordinate2D(latitude: -6.285061001737158, longitude: 106.62333136441812)
    static let greencove = CLLocationCoordinate2D(latitude: -6.300321028381107, longitude: 106.65987987166787)
    static let greenwichPark1 = CLLocationCoordinate2D(latitude: -6.2774398319866735, longitude: 106.6351100627204)
    static let greenwichPark2 = CLLocationCoordinate2D(latitude: -6.277250135984102, longitude: 106.63526135996666)
    static let greenwichParkOffice = CLLocationCoordinate2D(latitude: -6.276909557483332, longitude: 106.63404047625319)
    static let griyaLoka1 = CLLocationCoordinate2D(latitude: -6.304821435290772, longitude: 106.6824238389885)
    static let griyaLoka2 = CLLocationCoordinate2D(latitude: -6.305076553404019, longitude: 106.681569405581)
    static let horizonBroadway = CLLocationCoordinate2D(latitude: -6.313358290254492, longitude: 106.65043743901192)
    static let ice1 = CLLocationCoordinate2D(latitude: -6.297660793777328, longitude: 106.63663643126887)
    static let ice2 = CLLocationCoordinate2D(latitude: -6.30230640443507, longitude: 106.63528864263733)
    static let ice5 = CLLocationCoordinate2D(latitude: -6.297422975077355, longitude: 106.63615110893456)
    static let ice6 = CLLocationCoordinate2D(latitude: -6.299932019483977, longitude: 106.63535714770606)
    static let iceBSD = CLLocationCoordinate2D(latitude: -6.30230640443507, longitude: 106.63528864263733)
    static let iceBusinessPark = CLLocationCoordinate2D(latitude: -6.303916199041342, longitude: 106.63442852164776)
    static let iconBusinessPark = CLLocationCoordinate2D(latitude: -6.317422806905156, longitude: 106.64910070239512)
    static let iconCentro = CLLocationCoordinate2D(latitude: -6.314750029611809, longitude: 106.64625883482132)
    static let illustria = CLLocationCoordinate2D(latitude: -6.294078223951464, longitude: 106.63431852398683)
    static let intermoda = CLLocationCoordinate2D(latitude: -6.321392656413036, longitude: 106.64347023254095)
    static let jadeite = CLLocationCoordinate2D(latitude: -6.2764343709166175, longitude: 106.6396692394757)
    static let lobbyAeon = CLLocationCoordinate2D(latitude: -6.303821563407003, longitude: 106.64351518831641)
    static let lulu = CLLocationCoordinate2D(latitude: -6.281089670681412, longitude: 106.63638539967177)
    static let masjidAlUkhuwah = CLLocationCoordinate2D(latitude: -6.315196916858218, longitude: 106.65351321703082)
    static let mcdonald = CLLocationCoordinate2D(latitude: -6.300583, longitude: 106.641333)
    static let naturale = CLLocationCoordinate2D(latitude: -6.293833, longitude: 106.642750)
    static let navaPark1 = CLLocationCoordinate2D(latitude: -6.299925327301025, longitude: 106.64854431152344)
    static let navaPark2 = CLLocationCoordinate2D(latitude: -6.2910308837890625, longitude: 106.6497573852539)
    static let pasarModernTimur = CLLocationCoordinate2D(latitude: -6.305360794067383, longitude: 106.6858901977539)
    static let piazziaMozia = CLLocationCoordinate2D(latitude: -6.290560722351074, longitude: 106.62767028808594)
    static let polsekSerpong = CLLocationCoordinate2D(latitude: -6.29603910446167, longitude: 106.68131256103516)
    static let prestigia = CLLocationCoordinate2D(latitude: -6.294580936431885, longitude: 106.63433837890625)
    static let primavera = CLLocationCoordinate2D(latitude: -6.291369915008545, longitude: 106.64832305908203)
    static let puspitaloka = CLLocationCoordinate2D(latitude: -6.295390605926514, longitude: 106.67766571044922)
    static let qBig1 = CLLocationCoordinate2D(latitude: -6.284601211547852, longitude: 106.63839721679688)
    static let qBig2 = CLLocationCoordinate2D(latitude: -6.280660152435303, longitude: 106.63651275634766)
    static let qBig3 = CLLocationCoordinate2D(latitude: -6.283416748046875, longitude: 106.63774108886719)
    static let rukoMadrid = CLLocationCoordinate2D(latitude: -6.301989555358887, longitude: 106.68437957763672)
    static let rukoTheLoop = CLLocationCoordinate2D(latitude: -6.291157731506265, longitude: 106.63270955874107)
    static let santaUrsula1 = CLLocationCoordinate2D(latitude: -6.302560850047205, longitude: 106.68467354346794)
    static let santaUrsula2 = CLLocationCoordinate2D(latitude: -6.30032140704067, longitude: 106.6833217101519)
    static let saveria = CLLocationCoordinate2D(latitude: -6.307401193361203, longitude: 106.65362207904282)
    static let sektor13 = CLLocationCoordinate2D(latitude: -6.305747079473274, longitude: 106.67995720075763)
    static let sentraOnderdil = CLLocationCoordinate2D(latitude: -6.296864719231762, longitude: 106.681405097545)
    static let simpangForesta = CLLocationCoordinate2D(latitude: -6.299229145050049, longitude: 106.6479263305664)
    static let simplicity1 = CLLocationCoordinate2D(latitude: -6.313511371612549, longitude: 106.64318084716797)
    static let simplicity2 = CLLocationCoordinate2D(latitude: -6.313050746917725, longitude: 106.64257049560547)
    static let smlPlaza = CLLocationCoordinate2D(latitude: -6.302289962768555, longitude: 106.65125274658203)
    
    static let studento1 = CLLocationCoordinate2D(latitude: -6.295620441436768, longitude: 106.64208221435547)
    static let studento2 = CLLocationCoordinate2D(latitude: -6.295470714569092, longitude: 106.64214324951172)
    static let swa1 = CLLocationCoordinate2D(latitude: -6.299900054931641, longitude: 106.66239166259766)
    static let swa2 = CLLocationCoordinate2D(latitude: -6.29962158203125, longitude: 106.66243743896484)
    static let tabebuya = CLLocationCoordinate2D(latitude: -6.29189395904541, longitude: 106.62271881103516)
    static let theBreeze = CLLocationCoordinate2D(latitude: -6.301454544067383, longitude: 106.65314483642578)
    static let theMozia1 = CLLocationCoordinate2D(latitude: -6.291750907897949, longitude: 106.62850189208984)
    static let theMozia2 = CLLocationCoordinate2D(latitude: -6.291631698608398, longitude: 106.6286392211914)
    static let transBSDSektor13 = CLLocationCoordinate2D(latitude: -6.305740833282471, longitude: 106.68009185791016)
    static let vanyaPark = CLLocationCoordinate2D(latitude: -6.2954816818237305, longitude: 106.62190246582031)
    static let verdantView = CLLocationCoordinate2D(latitude: -6.313718795776367, longitude: 106.64863586425781)
    static let westPark = CLLocationCoordinate2D(latitude: -6.295841217041016, longitude: 106.62200164794922)
    
    
}

func formatTime(from date: Date) -> String {
    let formatter = DateFormatter()
    formatter.dateFormat = "HH:mm" // 24-hour format (use "hh:mm a" for 12-hour format with AM/PM)
    return formatter.string(from: date)
}


func getBusStops(_ ids: [String]) -> [BusStop] {
    var stops : [BusStop] = []
    
    for id in ids {
        stops += BusStop.all.filter { $0.id == id}
    }
        
    return stops
}

func getBus(_ ids: [String]) -> [Bus] {
    var buses : [Bus] = []
    
    for id in ids {
        buses += Bus.all.filter { $0.id == id}
    }
        
    return buses
}

extension CLLocationCoordinate2D: @retroactive Equatable {
    public static func ==(lhs: CLLocationCoordinate2D, rhs: CLLocationCoordinate2D) -> Bool {
        return lhs.latitude == rhs.latitude && lhs.longitude == rhs.longitude
    }
}


func getRoute(_ ids: [String]) -> [Route] {
    var routes : [Route] = []
    
    for id in ids {
        routes += Route.all.filter { $0.id == id}
    }
        
    return routes
}

func getScheduleForSpecificBus(_ id: String) -> Schedule {
    
    return Schedule.all.filter{$0.bus == id}.first!
}

extension String {
    func capitalizingFirstLetter() -> String {
        prefix(1).capitalized + dropFirst().lowercased()
    }
    
    // Function to extract the last number from the string
    func getLastNumber() -> String? {
        // Regular expression to match the last number in the string
        let regexPattern = "\\d+$"
        
        if let regex = try? NSRegularExpression(pattern: regexPattern, options: []) {
            let range = NSRange(location: 0, length: self.utf16.count)
            
            if let match = regex.firstMatch(in: self, options: [], range: range) {
                if let numberRange = Range(match.range, in: self) {
                    return String(self[numberRange])
                }
            }
        }
        
        // Return nil if no number is found
        return nil
    }
}

extension CLLocationCoordinate2D {
    func distance(to location: CLLocationCoordinate2D) -> CLLocationDistance {
        let location1 = CLLocation(latitude: self.latitude, longitude: self.longitude)
        let location2 = CLLocation(latitude: location.latitude, longitude: location.longitude)
        return location1.distance(from: location2) // This calls the correct distance method
    }
}
//
//extension CLLocationCoordinate2D {
//    func distance(to location: CLLocationCoordinate2D) -> CLLocationDistance {
//        let location1 = CLLocation(latitude: self.latitude, longitude: self.longitude)
//        let location2 = CLLocation(latitude: location.latitude, longitude: location.longitude)
//        return location1.distance(from: location2)
//    }
//}

extension View {
    func cornerRadius(_ radius: CGFloat, corners: UIRectCorner) -> some View {
        clipShape(RoundedCorner(radius: radius, corners: corners))
    }
}

struct RoundedCorner: Shape {
    var radius: CGFloat = .infinity
    var corners: UIRectCorner = .allCorners
    
    func path(in rect: CGRect) -> Path {
        let path = UIBezierPath(
            roundedRect: rect,
            byRoundingCorners: corners,
            cornerRadii: CGSize(width: radius, height: radius)
        )
        return Path(path.cgPath)
    }
}

//extension String {
//
//}
